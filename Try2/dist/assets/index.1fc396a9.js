var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{r as n,c as r,o as u,p as i,a as d,u as p,b as s,d as c,e as m,f,w as g,g as v,h as y,v as b,E as h,i as _,j as V,k as w,l as U,m as q,t as k,n as x,q as C,s as I,x as T,y as P,z as j}from"./vendor.5ff3be8d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const l of e)if("childList"===l.type)for(const e of l.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?a.credentials="include":"anonymous"===e.crossorigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const O={};O.render=function(e,a){const l=n("router-view");return u(),r(l)};const E={name:"Home",setup(){const e=p();return{navigateToUpload:()=>{e.push("/upload")},navigateToUpdate:()=>{e.push("/update")},navigateToManage:()=>{e.push("/manage")}}}};i("data-v-f2368196");const L={class:"home"};d(),E.render=function(e,a,l,t,o,n){return u(),s("div",L,[c("button",{onClick:a[0]||(a[0]=(...e)=>t.navigateToUpload&&t.navigateToUpload(...e))},"上传二手商品"),c("button",{onClick:a[1]||(a[1]=(...e)=>t.navigateToUpdate&&t.navigateToUpdate(...e))},"更新二手商品"),c("button",{onClick:a[2]||(a[2]=(...e)=>t.navigateToManage&&t.navigateToManage(...e))},"管理二手商品")])},E.__scopeId="data-v-f2368196";const N={name:"UploadForm",setup(){const e=m({name:"",image:null,description:"",quantity:1,price:0,ifground:!1}),a=p();return{form:e,handleImageUpload:a=>{e.value.image=a.target.files[0]},upload:async()=>{const l=new FormData;l.append("name",e.value.name),l.append("image",e.value.image),l.append("description",e.value.description),l.append("quantity",e.value.quantity),l.append("price",e.value.price),l.append("ifground",e.value.ifground?1:0);try{const e=await fetch("/upload",{method:"POST",body:l});"Product uploaded successfully"===(await e.json()).message?(h.success("商品上传成功！"),a.push("/")):h.error("商品上传失败！")}catch(t){console.error("Error:",t),h.error("上传过程中出现错误！")}},goBack:()=>a.push("/")}}};i("data-v-e236ca02");const B={class:"upload-form-wrapper"},M={class:"upload-form"},S=c("span",{class:"text-large font-600 mr-3"},"Uploader",-1),F=c("h2",null,"上传二手商品",-1),$=c("label",{for:"name"},"商品名称",-1),z=c("label",{for:"image"},"商品图片",-1),A=c("label",{for:"description"},"商品描述",-1),D=c("label",{for:"quantity"},"数量",-1),G=c("label",{for:"price"},"价格 (元)",-1),H={class:"radio-group"},K=c("label",null,"是否上架",-1),Q=_("上架"),J=_("不上架"),R=c("div",{class:"button-container"},[c("button",{type:"submit"},"上传商品")],-1);d(),N.render=function(e,a,l,t,o,r){const i=n("el-page-header"),d=n("el-radio"),p=n("el-radio-group");return u(),s("div",B,[c("div",M,[f(i,{onBack:t.goBack},{content:g((()=>[S])),_:1},8,["onBack"]),F,c("form",{onSubmit:a[6]||(a[6]=v(((...e)=>t.upload&&t.upload(...e)),["prevent"]))},[$,y(c("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>t.form.name=e),required:""},null,512),[[b,t.form.name]]),z,c("input",{type:"file",id:"image",onChange:a[1]||(a[1]=(...e)=>t.handleImageUpload&&t.handleImageUpload(...e)),accept:"image/*",required:""},null,32),A,y(c("textarea",{id:"description","onUpdate:modelValue":a[2]||(a[2]=e=>t.form.description=e),rows:"3",required:""},null,512),[[b,t.form.description]]),D,y(c("input",{type:"number",id:"quantity","onUpdate:modelValue":a[3]||(a[3]=e=>t.form.quantity=e),min:"1",required:""},null,512),[[b,t.form.quantity]]),G,y(c("input",{type:"number",id:"price","onUpdate:modelValue":a[4]||(a[4]=e=>t.form.price=e),step:"0.01",required:""},null,512),[[b,t.form.price]]),c("div",H,[K,f(p,{modelValue:t.form.ifground,"onUpdate:modelValue":a[5]||(a[5]=e=>t.form.ifground=e),class:"radio-options"},{default:g((()=>[f(d,{label:!0},{default:g((()=>[Q])),_:1}),f(d,{label:!1},{default:g((()=>[J])),_:1})])),_:1},8,["modelValue"])]),R],32)])])},N.__scopeId="data-v-e236ca02";const W={name:"UpdateForm",data:()=>({}),methods:{}};i("data-v-6ebbce8b");const X={class:"update-form"},Y=[c("div",{class:"PageName"},[c("h2",null,"更新二手商品")],-1)];d(),W.render=function(e,a,l,t,o,n){return u(),s("div",X,Y)},W.__scopeId="data-v-6ebbce8b";i("data-v-155bb2f6");const Z=c("span",{class:"text-large font-600 mr-3"},"Manager",-1),ee=c("hr",null,null,-1),ae={class:"manage-form"},le=c("div",{class:"manage-title"},[c("h2",null,"管理二手商品")],-1),te={class:"search-container",style:{"margin-bottom":"20px"}},oe=_("搜索"),ne=["src"],re=_("编辑"),ue=_("删除"),ie=_("已上架"),de=_("未上架"),pe=["src"],se={class:"dialog-footer"},ce=_("取消"),me=_("保存");d();const fe={setup(e){const r=p(),i=()=>{r.push("/")},d=m([]),v=m(!1),y=m({id:"",name:"",quantity:"",price:"",ifground:!1,description:"",image:""}),b=m(1),h=m(10),_=m(""),I=m(null),T=async()=>{try{const e=await q.get("/products");d.value=e.data.map(((e,a)=>({no:a+1,id:e.id,name:e.name,image:e.image,quantity:e.quantity,price:e.price,ifground:e.ifground,description:e.description})))}catch(e){console.error("Error fetching data:",e)}},P=()=>{b.value=1},j=V((()=>d.value.filter((e=>e.name.toLowerCase().includes(_.value.toLowerCase()))))),O=V((()=>{const e=(b.value-1)*h.value,a=e+h.value;return j.value.slice(e,a)})),E=e=>{b.value=e},L=e=>{y.value=((e,n)=>{for(var r in n||(n={}))l.call(n,r)&&o(e,r,n[r]);if(a)for(var r of a(n))t.call(n,r)&&o(e,r,n[r]);return e})({},e),v.value=!0},N=e=>{I.value=e.target.files[0],C((()=>{document.querySelector('input[placeholder="输入商品名称"]').focus()}))},B=async()=>{const e=new FormData;e.append("name",y.value.name),e.append("quantity",y.value.quantity),e.append("price",y.value.price),e.append("ifground",y.value.ifground),e.append("description",y.value.description),I.value&&e.append("image",I.value);try{await q.put(`/products/${y.value.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),T(),v.value=!1}catch(a){console.error("Error updating product:",a)}};return w((()=>{T()})),(e,a)=>{const l=n("el-page-header"),t=n("el-input"),o=n("el-button"),r=n("el-table-column"),d=n("el-table"),p=n("el-pagination"),m=n("el-form-item"),V=n("el-radio"),w=n("el-radio-group"),C=n("el-form"),I=n("el-dialog");return u(),s("div",null,[f(l,{onBack:i},{content:g((()=>[Z])),_:1}),ee,c("div",ae,[le,c("div",te,[f(t,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),placeholder:"按名称搜索商品",style:{width:"300px","margin-right":"20px"}},null,8,["modelValue"]),f(o,{onClick:P},{default:g((()=>[oe])),_:1})]),f(d,{data:U(O),style:{width:"100%"}},{default:g((()=>[f(r,{label:"No",prop:"no"}),f(r,{label:"Name",prop:"name"}),f(r,{label:"Image",prop:"image"},{default:g((({row:e})=>[c("img",{src:`/${e.image}`,alt:"Product Image",style:{"max-width":"100px","max-height":"100px"}},null,8,ne)])),_:1}),f(r,{label:"Quantity",prop:"quantity"}),f(r,{label:"Price",prop:"price"}),f(r,{label:"Grounding",prop:"ifground"},{default:g((({row:e})=>[c("span",null,k(e.ifground?"已上架":"未上架"),1)])),_:1}),f(r,{label:"Actions"},{default:g((({row:e})=>[f(o,{onClick:a=>L(e)},{default:g((()=>[re])),_:2},1032,["onClick"]),f(o,{onClick:a=>(async e=>{try{await q.delete(`/products/${e}`),T()}catch(a){console.error("Error deleting product:",a)}})(e.id),type:"danger"},{default:g((()=>[ue])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),f(p,{onCurrentChange:E,"current-page":b.value,"page-size":h.value,total:U(j).length,layout:"total, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])]),f(I,{modelValue:v.value,"onUpdate:modelValue":a[7]||(a[7]=e=>v.value=e),title:"编辑商品",width:"500"},{footer:g((()=>[c("div",se,[f(o,{onClick:a[6]||(a[6]=e=>v.value=!1)},{default:g((()=>[ce])),_:1}),f(o,{type:"primary",onClick:B},{default:g((()=>[me])),_:1})])])),default:g((()=>[f(C,{model:y.value},{default:g((()=>[f(m,{label:"名称"},{default:g((()=>[f(t,{modelValue:y.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.name=e)},null,8,["modelValue"])])),_:1}),f(m,{label:"数量"},{default:g((()=>[f(t,{modelValue:y.value.quantity,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.quantity=e),type:"number"},null,8,["modelValue"])])),_:1}),f(m,{label:"价格"},{default:g((()=>[f(t,{modelValue:y.value.price,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value.price=e),type:"number"},null,8,["modelValue"])])),_:1}),f(m,{label:"描述"},{default:g((()=>[f(t,{modelValue:y.value.description,"onUpdate:modelValue":a[4]||(a[4]=e=>y.value.description=e)},null,8,["modelValue"])])),_:1}),f(m,{label:"上架状态"},{default:g((()=>[f(w,{modelValue:y.value.ifground,"onUpdate:modelValue":a[5]||(a[5]=e=>y.value.ifground=e)},{default:g((()=>[f(V,{label:!0},{default:g((()=>[ie])),_:1}),f(V,{label:!1},{default:g((()=>[de])),_:1})])),_:1},8,["modelValue"])])),_:1}),f(m,{label:"图片"},{default:g((()=>[c("input",{type:"file",onChange:N},null,32),y.value.image?(u(),s("img",{key:0,src:`/${y.value.image}`,alt:"Product Image",style:{"max-width":"100px","max-height":"100px"}},null,8,pe)):x("",!0)])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}},__scopeId:"data-v-155bb2f6"};const ge=[{path:"/",component:E},{path:"/upload",component:N},{path:"/update",component:W},{path:"/manage",component:fe}],ve=I({history:T(),routes:ge}),ye=P(O);ye.use(j),ye.use(ve),ye.mount("#app");
